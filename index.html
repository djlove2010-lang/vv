<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CALIGO :: Dust Market</title>
    <style>
        /* [Global Settings] */
        :root {
            --bg-color: #050505;
            --card-bg: #0f0f0f;
            --text-main: #e0e0e0;
            --accent-cyan: #00f3ff;
            --accent-red: #ff2a2a;
            --dim-gray: #444;
            --font-stack: 'Courier New', Courier, monospace;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: var(--font-stack);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* [Intro Loading Screen] */
        #intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            z-index: 99999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease;
        }

        .intro-logo-box {
            width: 150px;
            height: 150px;
            border: 2px solid var(--accent-cyan);
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.2);
        }
        
        .intro-logo-box img {
            width: 80%;
            height: 80%;
            object-fit: contain;
            filter: grayscale(100%) drop-shadow(0 0 5px var(--accent-cyan));
        }

        .loading-bar-container {
            width: 300px;
            height: 4px;
            background: #333;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .loading-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 0%;
            background: var(--accent-cyan);
            box-shadow: 0 0 10px var(--accent-cyan);
            transition: width 0.2s linear;
        }

        .intro-text {
            color: var(--accent-cyan);
            font-size: 0.9rem;
            letter-spacing: 2px;
            min-height: 1.5em;
        }

        /* [Glitch Animation] */
        @keyframes glitch {
            0% { text-shadow: 2px 0 var(--accent-red), -2px 0 var(--accent-cyan); }
            25% { text-shadow: -2px 0 var(--accent-red), 2px 0 var(--accent-cyan); }
            50% { text-shadow: 2px 0 var(--accent-red), -2px 0 var(--accent-cyan); }
            75% { text-shadow: -2px 0 var(--accent-red), 2px 0 var(--accent-cyan); }
            100% { text-shadow: 2px 0 var(--accent-red), -2px 0 var(--accent-cyan); }
        }

        /* [Header] */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid var(--dim-gray);
            background: rgba(0,0,0,0.9);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-cyan);
            letter-spacing: 3px;
            animation: glitch 1s infinite linear alternate-reverse;
            cursor: pointer;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-status {
            font-size: 0.9rem;
            color: var(--dim-gray);
            display: none; /* Mobile hide */
        }
        @media (min-width: 768px) { .user-status { display: block; } }

        .user-status span {
            color: var(--accent-cyan);
        }

        .profile-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #222;
            border: 2px solid var(--dim-gray);
            cursor: pointer;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: 0.3s;
        }
        .profile-icon:hover {
            border-color: var(--accent-cyan);
            box-shadow: 0 0 10px rgba(0, 243, 255, 0.3);
        }
        .profile-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* [Search Section] */
        .search-container {
            text-align: center;
            padding: 30px 20px 10px 20px;
        }

        .search-box {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }

        #searchInput {
            width: 100%;
            padding: 15px;
            background: #000;
            border: 1px solid var(--accent-cyan);
            color: var(--accent-cyan);
            font-family: var(--font-stack);
            font-size: 1.1rem;
            outline: none;
            box-shadow: 0 0 10px rgba(0, 243, 255, 0.2);
        }

        /* [Category Tabs] */
        .category-nav {
            display: flex;
            justify-content: center;
            gap: 2px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: #111;
            color: #777;
            border: 1px solid #333;
            padding: 10px 25px;
            cursor: pointer;
            font-family: var(--font-stack);
            font-size: 0.9rem;
            transition: 0.3s;
            text-transform: uppercase;
        }

        .tab-btn:hover {
            background: #222;
            color: #fff;
        }

        .tab-btn.active {
            background: var(--accent-cyan);
            color: #000;
            font-weight: bold;
            border-color: var(--accent-cyan);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.3);
        }

        /* [Main Content: Product Grid] */
        .market-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            padding: 30px 5%;
            margin-bottom: 60px;
            display: none; /* Hidden by default, toggled by JS */
        }
        
        .market-grid.active-grid {
            display: grid;
        }

        .card {
            background: var(--card-bg);
            border: 1px solid #333;
            transition: transform 0.3s, border-color 0.3s;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-cyan);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.1);
        }

        .card img {
            width: 100%;
            aspect-ratio: 1 / 1; /* 1:1 Aspect Ratio */
            height: auto;
            object-fit: cover;
            display: block;
            border-bottom: 1px solid #333;
        }

        /* Placeholder Image Styling */
        .img-placeholder {
            width: 100%;
            aspect-ratio: 1 / 1; /* 1:1 Aspect Ratio */
            height: auto !important;
            background: #151515;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            border-bottom: 1px solid #333;
            font-size: 1.2rem;
            text-align: center;
        }

        .card-info {
            padding: 20px;
        }

        .card-title {
            font-size: 1.2rem;
            color: #fff;
            margin-bottom: 5px;
        }

        .card-desc {
            font-size: 0.85rem;
            color: #aaa;
            margin-bottom: 15px;
            min-height: 40px;
        }

        .card-price {
            font-size: 1.1rem;
            color: var(--accent-cyan);
            font-weight: bold;
            margin-bottom: 15px;
            display: block;
        }

        /* [Action Buttons Row] */
        .action-row {
            display: flex;
            gap: 5px;
        }

        .btn-buy {
            flex-grow: 1;
            padding: 10px;
            background: transparent;
            border: 1px solid var(--accent-red);
            color: var(--accent-red);
            font-family: var(--font-stack);
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: 0.3s;
        }

        .btn-buy:hover {
            background: var(--accent-red);
            color: #000;
        }

        .btn-detail {
            width: 60px;
            background: #111;
            border: 1px solid #555;
            color: #fff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            transition: 0.3s;
        }
        .btn-detail:hover {
            border-color: var(--accent-cyan);
            color: var(--accent-cyan);
        }

        .btn-cart {
            width: 42px; /* Approx 1x1 match with height */
            background: #000;
            border: 1px solid #555;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            transition: 0.3s;
        }
        
        .btn-cart.checked {
            background: var(--accent-cyan);
            color: #000;
            border-color: var(--accent-cyan);
        }

        /* [Secret Item Silhouette Style] */
        .card.secret-locked img, 
        .card.secret-locked .img-placeholder {
            filter: brightness(0) blur(5px);
            background: #000;
            color: transparent;
        }
        .card.secret-locked .card-title,
        .card.secret-locked .card-desc,
        .card.secret-locked .card-price {
            color: #333;
            text-shadow: none;
            background: #000;
        }
        .card.secret-locked:hover {
            border-color: #333;
            box-shadow: none;
            transform: none;
        }

        /* [Sidebar Menu] */
        #side-menu {
            position: fixed;
            top: 0;
            right: -350px;
            width: 320px;
            height: 100vh;
            background: #0a0a0a;
            border-left: 1px solid var(--accent-cyan);
            z-index: 200;
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 20px;
            display: flex;
            flex-direction: column;
            box-shadow: -5px 0 30px rgba(0,0,0,0.8);
        }

        #side-menu.open {
            right: 0;
        }

        .menu-header {
            font-size: 1.2rem;
            border-bottom: 1px solid #333;
            padding-bottom: 15px;
            margin-bottom: 20px;
            color: var(--accent-cyan);
            display: flex;
            justify-content: space-between;
        }

        .close-menu {
            cursor: pointer;
            color: #555;
        }
        .close-menu:hover { color: #fff; }

        .cart-list {
            flex-grow: 1;
            overflow-y: auto;
            border: 1px solid #222;
            padding: 10px;
            margin-bottom: 15px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            margin-bottom: 8px;
            border-bottom: 1px dashed #333;
            padding-bottom: 5px;
        }

        .total-price {
            font-size: 1.1rem;
            text-align: right;
            color: var(--accent-cyan);
            margin-bottom: 20px;
        }

        .menu-btn {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            background: #111;
            border: 1px solid #444;
            color: #ddd;
            cursor: pointer;
            font-family: var(--font-stack);
            transition: 0.3s;
        }

        .menu-btn:hover {
            background: #222;
            border-color: #888;
        }

        .btn-logout {
            border-color: var(--accent-red);
            color: var(--accent-red);
            margin-top: auto;
        }
        .btn-logout:hover {
            background: var(--accent-red);
            color: #000;
        }

        .btn-sidebar-buy {
            background: transparent;
            border: 1px solid var(--accent-cyan);
            color: var(--accent-cyan);
            padding: 12px;
            margin-bottom: 20px;
            width: 100%;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }
        .btn-sidebar-buy:hover {
            background: var(--accent-cyan);
            color: #000;
        }

        /* [Product Detail Modal] */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 300;
            display: none;
            justify-content: center;
            align-items: center;
        }
        
        .detail-box {
            background: #111;
            border: 1px solid var(--accent-cyan);
            width: 90%;
            max-width: 500px;
            padding: 20px;
            position: relative;
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.15);
        }

        .detail-close {
            position: absolute;
            top: 10px; right: 15px;
            color: var(--accent-cyan);
            cursor: pointer;
            font-size: 1.5rem;
        }

        .detail-img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            margin-bottom: 20px;
            border: 1px solid #333;
        }

        /* [Profile & Settings View] */
        #profile-screen {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: #080808;
            z-index: 250;
            display: none;
            flex-direction: column;
            padding: 40px;
            overflow-y: auto;
        }

        .profile-header {
            border-bottom: 2px solid var(--accent-cyan);
            padding-bottom: 20px;
            margin-bottom: 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .profile-content {
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
        }

        .setting-row {
            margin-bottom: 20px;
            border: 1px solid #333;
            padding: 20px;
            display: flex;
            flex-direction: column; 
            gap: 10px;
            align-items: flex-start;
            background: #0f0f0f;
        }
        @media (min-width: 600px) {
            .setting-row {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
        }

        .delete-account {
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .back-btn {
            background: none;
            border: 1px solid var(--accent-cyan);
            color: var(--accent-cyan);
            padding: 10px 20px;
            cursor: pointer;
        }

        /* [Delete Confirm Modal] */
        .confirm-box {
            background: #000;
            border: 2px solid var(--accent-red);
            padding: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }
        .confirm-btns {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .c-btn {
            padding: 10px 30px;
            cursor: pointer;
            font-weight: bold;
        }
        .c-yes { background: var(--accent-red); border: none; color: black; }
        .c-no { background: transparent; border: 1px solid #fff; color: #fff; }

        /* [Payment Method Modal] */
        .pay-option-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin-bottom: 10px;
            background: #111;
            border: 1px solid #444;
            color: #fff;
            cursor: pointer;
            text-align: left;
        }
        .pay-option-btn:hover {
            border-color: var(--accent-cyan);
            color: var(--accent-cyan);
        }

        /* [IP Trace Result] */
        .ip-trace-result {
            color: var(--accent-red);
            font-size: 1.5rem;
            margin-top: 20px;
            text-shadow: 0 0 10px red;
            font-weight: bold;
        }
        .ip-subtext {
            font-size: 0.7rem;
            color: #555;
            margin-top: 5px;
        }

        /* [Infinite Car Loading Bar] */
        .infinite-loading-container {
            width: 100%;
            height: 50px;
            background: #111;
            margin-top: 30px;
            position: relative;
            overflow: hidden;
            border-top: 2px dashed #444;
            border-bottom: 2px dashed #444;
        }
        
        .infinite-car {
            position: absolute;
            top: 50%;
            left: -100px;
            transform: translateY(-50%);
            width: 80px;
            height: 30px;
            background: var(--accent-red);
            box-shadow: 0 0 15px red;
            animation: drive-infinite 2s linear infinite;
        }

        .infinite-car::after {
            content: '';
            position: absolute;
            right: -10px;
            top: 5px;
            width: 10px;
            height: 5px;
            background: #fff; /* Headlight */
            box-shadow: 0 0 10px #fff;
        }

        @keyframes drive-infinite {
            0% { left: -100px; }
            100% { left: 100%; }
        }

        /* [Ticker Section] */
        .ticker-wrap {
            position: fixed;
            bottom: 40px;
            width: 100%;
            background-color: #111;
            padding-left: 100%; 
            border-top: 1px solid #333;
            border-bottom: 1px solid #333;
            overflow: hidden;
            z-index: 50;
            white-space: nowrap;
        }

        .ticker {
            display: inline-block;
            padding: 10px 0;
            animation: marquee 20s linear infinite;
            color: var(--accent-cyan);
            font-size: 0.9rem;
        }

        .ticker span {
            margin-right: 50px;
        }

        @keyframes marquee {
            0% { transform: translate3d(0, 0, 0); }
            100% { transform: translate3d(-100%, 0, 0); }
        }

        /* [Footer] */
        footer {
            text-align: center;
            padding: 60px 20px 80px 20px;
            font-size: 0.8rem;
            color: #555;
        }

        /* =========================================
           [SECRET MODE: TEXT HORROR] 
           ========================================= */
        #secretModal {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            background: #000;
            z-index: 9999;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .horror-mode #secretModal { display: flex; }

        .horror-text {
            color: var(--accent-red);
            font-family: var(--font-stack);
            font-size: 1.2rem;
            white-space: pre-wrap;
            max-width: 800px;
            text-shadow: 2px 2px 5px #ff0000;
            line-height: 1.8;
            opacity: 0.9;
        }

        .system-alert {
            border: 2px solid var(--accent-red);
            padding: 10px 20px;
            color: var(--accent-red);
            font-weight: bold;
            margin-bottom: 30px;
            background: rgba(255, 0, 0, 0.1);
            animation: blink 0.5s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .horror-mode::before {
            content: "";
            position: fixed;
            inset: 0;
            pointer-events: none;
            background: repeating-linear-gradient(
                to bottom,
                rgba(0, 0, 0, 0.12),
                rgba(0, 0, 0, 0.12) 1px,
                rgba(255, 255, 255, 0.02) 2px,
                rgba(0, 0, 0, 0) 4px
            );
            z-index: 9999;
            animation: scan-flicker 0.12s infinite;
        }

        @keyframes scan-flicker {
            0% { opacity: 0.15; }
            50% { opacity: 0.08; }
            100% { opacity: 0.15; }
        }

        /* =========================================
           [SECRET MODE: IMAGE SCROLL] 
           ========================================= */
        #imageScrollModal {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            background: #000;
            z-index: 10000;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
            padding: 50px 0;
        }
        
        .scroll-content {
            display: flex;
            flex-direction: column;
            gap: 50px;
            align-items: center;
            width: 100%;
        }

        .horror-img-container {
            width: 90%;
            max-width: 600px;
            border: 1px solid #333;
            background: #111;
            padding: 10px;
            text-align: center;
        }

        .horror-img-container img {
            width: 100%;
            height: auto;
            filter: grayscale(100%) contrast(1.2);
            border-bottom: 1px solid #333;
            margin-bottom: 10px;
        }

        .horror-caption {
            color: #555;
            font-size: 0.8rem;
            letter-spacing: 5px;
        }

        .force-red-text {
            color: red !important;
            font-weight: bold;
        }

    </style>
</head>
<body>

    <!-- Intro Loading Screen -->
    <div id="intro-screen">
        <div class="intro-logo-box">
            <svg viewBox="0 0 100 100" fill="none" stroke="#00f3ff" stroke-width="2" style="width:60%; height:60%;">
                <path d="M50 10 L90 90 L10 90 Z" />
                <circle cx="50" cy="55" r="10" />
            </svg>
        </div>
        <div class="loading-bar-container">
            <div class="loading-bar" id="loadingBar"></div>
        </div>
        <div class="intro-text" id="introText">CONNECTING TO SECURE SERVER...</div>
    </div>

    <header>
        <div class="logo" data-text="[ DUST MARKET ]" onclick="resetToHome()">[ DUST MARKET ]</div>
        <div class="header-right">
            <div class="user-status">User: <span>Anonymous_User</span></div>
            <div class="profile-icon" onclick="toggleSidebar()">
                <svg viewBox="0 0 24 24" fill="#666" style="width:24px; height:24px;">
                    <circle cx="12" cy="8" r="4" />
                    <path d="M4 20c0-4.4 3.6-8 8-8s8 3.6 8 8" />
                </svg>
            </div>
        </div>
    </header>

    <section class="search-container">
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search Item Key / Protocol..." autocomplete="off">
        </div>
        
        <!-- Category Tabs -->
        <nav class="category-nav">
            <button class="tab-btn active" onclick="switchTab('main', this)">Main</button>
            <button class="tab-btn" onclick="switchTab('dust', this)">Dust</button>
            <button class="tab-btn" onclick="switchTab('information', this)">Information</button>
            <button class="tab-btn" onclick="switchTab('service', this)">Service</button>
            <button class="tab-btn" onclick="switchTab('item', this)">Item</button>
        </nav>
    </section>

    <!-- [TAB: MAIN] -->
    <section id="grid-main" class="market-grid active-grid">
        <!-- Item 1 -->
        <div class="card" data-id="main-1" data-name="Lucia" data-price="200,000,000">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/lu.webp" alt="Lucia Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title">루시아</div>
                <div class="card-desc">아우리온 연방 소재 발키리. 제어 불안정. 최대 30일 이내 포획 보증.</div>
                <span class="card-price">$ 200,000,000</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'main-1', 200000000)">✔</button>
                    <button class="btn-detail" onclick="showDetail('main-1')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('main-1')">BUY NOW</button>
                </div>
            </div>
        </div>

        <!-- Item 2 -->
        <div class="card" data-id="main-2" data-name="Serin" data-price="500,000,000">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/se.webp" alt="serin Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title">세린</div>
                <div class="card-desc">칼리고 소재 발키리. 제어 용이. 최대 30일 이내 포획 보증.</div>
                <span class="card-price">$ 500,000,000</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'main-2', 500000000)">✔</button>
                    <button class="btn-detail" onclick="showDetail('main-2')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('main-2')">BUY NOW</button>
                </div>
            </div>
        </div>

        <!-- Item 3 -->
        <div class="card" data-id="main-3" data-name="Ver" data-price="2,000,000,000">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/ver.png" alt="ver Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title">베르</div>
                <div class="card-desc">칼리고 소재 발키리. 제어 난도 중. 최대 30일 이내 포획 보증.</div>
                <span class="card-price">$ 2,000,000,000</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'main-3', 2000000000)">✔</button>
                    <button class="btn-detail" onclick="showDetail('main-3')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('main-3')">BUY NOW</button>
                </div>
            </div>
        </div>

        <!-- HIDDEN SECRET ITEM (Initially Locked) -->
        <div class="card secret-locked" id="secretItem" data-id="secret-1" data-name="Become a warrior." data-price="999,999">
            <div class="img-placeholder">?</div>
            <img src="https://via.placeholder.com/300/000000/333333?text=SECRET" alt="Secret" style="display:none;" id="secretImgReal">
            <div class="card-info">
                <div class="card-title">UNKNOWN ASSET</div>
                <div class="card-desc">Input code to reveal data.</div>
                <span class="card-price">$ ???</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'secret-1', 999999)">✔</button>
                    <button class="btn-detail" onclick="showDetail('secret-1')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('secret-1')">BUY NOW</button>
                </div>
            </div>
        </div>
    </section>

    <!-- [TAB: DUST] -->
    <section id="grid-dust" class="market-grid">
        <div class="card" data-id="dust-1" data-name="Dust (0.1g)" data-price="1,500">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/1.png" alt="dust1 Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title">Stardust (0.1g)</div>
                <span class="card-price">$ 1,500</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'dust-1', 1500)">✔</button>
                    <button class="btn-detail" onclick="showDetail('dust-1')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('dust-1')">BUY NOW</button>
                </div>
            </div>
        </div>

        <div class="card" data-id="dust-2" data-name="Dust (1g)" data-price="14,000">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/2.png" alt="dust2 Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title">Stardust (1g)</div>
                <span class="card-price">$ 14,000</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'dust-1', 14,000)">✔</button>
                    <button class="btn-detail" onclick="showDetail('dust-2')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('dust-1')">BUY NOW</button>
                </div>
            </div>
        </div>

        <div class="card" data-id="dust-3" data-name="Dust (5g)" data-price="69,500">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/3.png" alt="dust3 Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title">Stardust (5g)</div>
                <span class="card-price">$ 69,500</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'dust-1', 69,500)">✔</button>
                    <button class="btn-detail" onclick="showDetail('dust-3')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('dust-1')">BUY NOW</button>
                </div>
            </div>
        </div>

        <div class="card" data-id="dust-4" data-name="Dust (100g)" data-price="1,400,000">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/4.png" alt="dust4 Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title">Stardust (100g)</div>
                <span class="card-price">$ 1,400,000</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'dust-1', 1,400,000)">✔</button>
                    <button class="btn-detail" onclick="showDetail('dust-4')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('dust-1')">BUY NOW</button>
                </div>
            </div>
        </div>

        <div class="card" data-id="dust-5" data-name="syringe" data-price="5">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/5.png" alt="dust5 Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title">syringe</div>
                <span class="card-price">$ 5</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'dust-5', 5)">✔</button>
                    <button class="btn-detail" onclick="showDetail('dust-5')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('dust-1')">BUY NOW</button>
                </div>
            </div>
        </div>
    </section>

    <!-- [TAB: INFORMATION] -->
    <section id="grid-information" class="market-grid">
        <div class="card" data-id="info-1" data-name="Ash Coast Subway Map" data-price="50,000">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/7.png" alt="sub Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title">애쉬 코스트 노선도</div>
                <div class="card-desc">비밀 통로 포함.</div>
                <span class="card-price">$ 50,000</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'info-1', 50000)">✔</button>
                    <button class="btn-detail" onclick="showDetail('info-1')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('info-1')">BUY NOW</button>
                </div>
            </div>
        </div>

        <div class="card" data-id="info-2" data-name="Edible Plant Atlas (Ver. 3.2)" data-price="500">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/8.png" alt="plant Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title">식용 식물 도감 (Ver. 3.2)</div>
                <div class="card-desc">먹으면 죽는 풀 구분해 드립니다. 업데이트로 변종 독버섯 항목 추가.</div>
                <span class="card-price">$ 500</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'info-2', 500)">✔</button>
                    <button class="btn-detail" onclick="showDetail('info-2')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('info-1')">BUY NOW</button>
                </div>
            </div>
        </div>

        <div class="card" data-id="info-3" data-name="Old military security release codes" data-price="25,000">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/9.png" alt="codes Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title">구형 군사 보안 해제 코드 (일회용)</div>
                <div class="card-desc">아우리온의 군사 벙커의 마스터키 코드.</div>
                <span class="card-price">$ 25,000</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'info-3', 25000)">✔</button>
                    <button class="btn-detail" onclick="showDetail('info-3')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('info-1')">BUY NOW</button>
                </div>
            </div>
        </div>
    </section>

    <!-- [TAB: SERVICE] -->
    <section id="grid-service" class="market-grid">
        <div class="card" data-id="serv-1" data-name="Memory cut" data-price="120,000">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/11.png" alt="cut Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title"> [기억 조작] 메모리 컷</div>
                <div class="card-desc">잊고 싶은 끔찍한 기억이 있나요? 아니면 누군가의 머릿속에서 특정 정보를 지워야 하나요? 뇌신경 시술로 해당 기억만 도려내 드립니다.</div>
                <span class="card-price">$ 120,000</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'serv-1', 120000)">✔</button>
                    <button class="btn-detail" onclick="showDetail('serv-1')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('serv-1')">BUY NOW</button>
                </div>
            </div>
        </div>

   <div class="card" data-id="serv-2" data-name="Silent Kill" data-price="30,000">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/10.png" alt="S Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title"> [표적 제거] 사일런트 킬</div>
                <div class="card-desc">원하는 대상의 심장을 멈춰드립니다. 사고사 위장 가능, 실종 처리 가능.</div>
                <span class="card-price">$ 30,000</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'serv-2', 30000)">✔</button>
                    <button class="btn-detail" onclick="showDetail('serv-2')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('serv-1')">BUY NOW</button>
                </div>
            </div>
        </div>

   <div class="card" data-id="serv-3" data-name="Clean-up" data-price="10,000">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/12.png" alt="C Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title"> [청소 대행] 흔적 말소 서비스</div>
                <div class="card-desc">원하는 대상의 심장을 멈춰드립니다. 사고사 위장 가능, 실종 처리 가능.</div>
                <span class="card-price">$ 10,000</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'serv-3', 10000)">✔</button>
                    <button class="btn-detail" onclick="showDetail('serv-3')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('serv-1')">BUY NOW</button>
                </div>
            </div>
        </div>
    </section>

    <!-- [TAB: ITEM] -->
    <section id="grid-item" class="market-grid">
        <div class="card" data-id="item-1" data-name="Railgun" data-price="3,000,000">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/13.png" alt="C Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title">[개조 무기] 휴대용 레일건 (커스텀)</div>
                <div class="card-desc">건설용 자재 파쇄기를 개조해 만든 소형 레일건. 탄환 20발 동봉.</div>
                <span class="card-price">$ 3,000,000</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'item-1', 3000000)">✔</button>
                    <button class="btn-detail" onclick="showDetail('item-1')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('item-1')">BUY NOW</button>
                </div>
            </div>
        </div>

        <div class="card" data-id="item-2" data-name="Railgun Bullets" data-price="3,000">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/14.png" alt="G Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title">[탄환] 레일건용 탄환 50발</div>
                <div class="card-desc">더스트 마켓 전용 레일건 탄환.</div>
                <span class="card-price">$ 3,000</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'item-2', 3000)">✔</button>
                    <button class="btn-detail" onclick="showDetail('item-2')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('item-1')">BUY NOW</button>
                </div>
            </div>
        </div>

        <div class="card" data-id="item-3" data-name="Biological Core" data-price="999,999,999">
            <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/15.png" alt="SS Image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="card-info">
                <div class="card-title">스타더스트 생체 코어</div>
                <div class="card-desc">남극에서 발견된 에너지 코어. 정제 성공시 무한한 스타더스트를 얻을 가능성이 있다.</div>
                <span class="card-price">$ 999,999,999</span>
                <div class="action-row">
                    <button class="btn-cart" onclick="toggleCart(this, 'item-3', 999999999)">✔</button>
                    <button class="btn-detail" onclick="showDetail('item-3')">INFO</button>
                    <button class="btn-buy" onclick="buyItem('item-1')">BUY NOW</button>
                </div>
            </div>
        </div>
    </section>

    <!-- [SIDEBAR MENU] -->
    <div id="side-menu">
        <div class="menu-header">
            <span>USER MENU</span>
            <span class="close-menu" onclick="toggleSidebar()">✕</span>
        </div>
        
        <div style="color:#888; font-size:0.8rem; margin-bottom:5px;">CART</div>
        <div class="cart-list" id="cartList">
            <!-- Items added by JS -->
            <div style="padding:10px; color:#444; text-align:center;">Empty</div>
        </div>
        <div class="total-price" id="cartTotal">TOTAL: $ 0</div>
        
        <!-- NEW BUY BUTTON IN SIDEBAR -->
        <button class="btn-sidebar-buy" onclick="alert('접근 권한이 없습니다.')">CHECKOUT</button>

        <button class="menu-btn" onclick="openProfile()">PROFILE SETTINGS</button>
        <button class="menu-btn btn-logout" onclick="tryLogout()">LOGOUT</button>
    </div>

    <!-- [PRODUCT DETAIL MODAL] -->
    <div class="modal-overlay" id="detailModal">
        <div class="detail-box">
            <span class="detail-close" onclick="closeDetail()">×</span>
            <img src="" alt="Detail" class="detail-img" id="modalImg" onerror="this.style.display='none'">
            <h2 id="modalTitle" style="color:#fff; margin-bottom:10px;"></h2>
            <p id="modalDesc" style="color:#aaa; margin-bottom:20px; font-size:0.9rem;"></p>
            <div style="text-align:right; font-weight:bold; color:var(--accent-cyan);" id="modalPrice"></div>
        </div>
    </div>

    <!-- [PROFILE SCREEN MODAL] -->
    <div id="profile-screen">
        <div class="profile-header">
            <h1 style="color:var(--accent-cyan);">// PROFILE CONFIGURATION</h1>
            <button class="back-btn" onclick="closeProfile()">BACK</button>
        </div>
        <div class="profile-content" id="profileContent">
            
            <div class="setting-row">
                <span>USER ID</span>
                <span style="color:#aaa;">Anonymous_User</span>
            </div>

            <!-- COUPON CODE SECTION -->
            <div class="setting-row">
                <div style="display:flex; flex-direction:column; width:100%;">
                    <label style="color:#555; font-size:0.8rem; margin-bottom:5px;">ENTER COUPON CODE (4자리)</label>
                    <div style="display:flex; gap:10px;">
                        <input type="text" id="couponInput" style="background:#000; border:1px solid #333; color:#fff; padding:10px; flex-grow:1;" placeholder="CODE">
                        <button class="menu-btn" style="width:auto; margin:0;" onclick="applyCoupon()">APPLY</button>
                    </div>
                </div>
            </div>
            
            <div class="setting-row">
                <button class="menu-btn" style="width:auto;" onclick="alert('Access Denied.')">EDIT INFO</button>
                <span style="font-size:0.8rem; color:#555;">Modify personal data</span>
            </div>

            <div class="setting-row">
                <button class="menu-btn" style="width:auto;" onclick="showAddress()">EDIT ADDRESS</button>
                <span style="font-size:0.8rem; color:#555;">Physical drop points</span>
            </div>

            <div class="setting-row">
                <button class="menu-btn" style="width:auto;" onclick="showPaymentOptions()">PAYMENT METHOD</button>
                <span style="font-size:0.8rem; color:#555;">Crypto wallet link</span>
            </div>

            <!-- NEW TERMS BUTTON -->
            <div class="setting-row">
                <button class="menu-btn" style="width:auto;" onclick="alert('text')">TERMS OF SERVICE</button>
                <span style="font-size:0.8rem; color:#555;">Read user agreement</span>
            </div>

            <div class="setting-row" style="border-color:var(--accent-red);">
                <button class="menu-btn delete-account" style="width:auto; border-color:var(--accent-red);" onclick="confirmDelete()">DELETE ACCOUNT</button>
                <span style="font-size:0.8rem; color:var(--accent-red);">Permanent data wipe</span>
            </div>

        </div>
    </div>

    <!-- [PAYMENT METHOD MODAL] -->
    <div class="modal-overlay" id="paymentModal">
        <div class="detail-box">
            <span class="detail-close" onclick="closePaymentModal()">×</span>
            <h3 style="color:#fff; margin-bottom:20px;">SELECT PAYMENT METHOD</h3>
            <button class="pay-option-btn" onclick="alert('카드 연결됨')">CREDIT CARD [2077 GEN]</button>
            <button class="pay-option-btn" onclick="alert('카드 연결됨')">SECURE BANK TRANSFER</button>
            <button class="pay-option-btn" onclick="alert('비트코인 지갑 연결됨')">BITCOIN (BTC)</button>
        </div>
    </div>

    <!-- [DELETE CONFIRM OVERLAY] -->
    <div class="modal-overlay" id="deleteConfirmModal">
        <div class="confirm-box">
            <div style="color:#fff; margin-bottom:20px;">정말 탈퇴하시겠습니까?</div>
            <div class="confirm-btns">
                <button class="c-btn c-yes" onclick="executeDelete()">YES</button>
                <button class="c-btn c-no" onclick="closeDeleteConfirm()">NO</button>
            </div>
        </div>
    </div>

    <!-- [SECRET HORROR MODAL (TEXT)] -->
    <div id="secretModal">
        <div class="system-alert">SYSTEM ERROR: UNAUTHORIZED ACCESS DETECTED</div>
        <div id="horrorContent" class="horror-text"></div>
    </div>

    <!-- [SECRET HORROR MODAL (IMAGES)] -->
    <div id="imageScrollModal">
        <div class="scroll-content">

                <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/18.png" alt="Horror 1">
                <div class="horror-caption">map</div>
            </div>
            <div class="horror-img-container">
                <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/16.png" alt="Horror 2">
                <div class="horror-caption">"""Aurion""" Federation</div>
            </div>
            <div class="horror-img-container">
                <img src="https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/17.png" alt="Horror 3">
                <div class="horror-caption">Barka Empire</div>
            </div>
        </div>
    </div>

    <!-- [FOOTER TICKER] -->
    <div class="ticker-wrap">
        <div class="ticker">
            <span>[시스템 알림] 모든 거래는 암호화됩니다.</span>
            <span>[업데이트] 서버 점검이 오전 3시에 예정되어 있습니다.</span>
            <span>[경고] 개인 키를 공유하지 마십시오.</span>
            <span>[재고] 신제품이 입고되었습니다.</span>
            <span>[보안] 네트워크 침입 시도가 감지되었습니다.</span>
        </div>
    </div>

    <footer>
        <p>CAUTION: This network is not secure for standard protocols.</p>
        <p>필요에 의해 접속장소 등이 중앙서버로 전송될 수 있습니다.</p>
        <br>
        <p style="opacity: 0.5;">Powered by Caligo Dark Network</p>
    </footer>

    <script>
        /* ============================
           [ GLOBAL VARIABLES & INIT ]
           ============================ */
        const body = document.body;
        const searchInput = document.getElementById('searchInput');
        const horrorContent = document.getElementById('horrorContent');
        const cartListEl = document.getElementById('cartList');
        const cartTotalEl = document.getElementById('cartTotal');
        
        let cartItems = {}; 

        // Intro Sequence
        window.onload = function() {
            const bar = document.getElementById('loadingBar');
            const txt = document.getElementById('introText');
            const screen = document.getElementById('intro-screen');
            
            // Animation
            setTimeout(() => { bar.style.width = '30%'; }, 100);
            setTimeout(() => { bar.style.width = '70%'; }, 800);
            setTimeout(() => { 
                bar.style.width = '100%'; 
                txt.innerText = "ACCESS GRANTED";
                txt.style.color = "#00f3ff";
                txt.style.textShadow = "0 0 10px #00f3ff";
            }, 1800);

            setTimeout(() => {
                screen.style.opacity = '0';
                setTimeout(() => { screen.style.display = 'none'; }, 1000);
            }, 2500);
        };

        function resetToHome() {
            location.reload();
        }

        /* ============================
           [ TAB SYSTEM ]
           ============================ */
        function switchTab(tabName, btn) {
            const btns = document.querySelectorAll('.tab-btn');
            btns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            const grids = document.querySelectorAll('.market-grid');
            grids.forEach(g => g.classList.remove('active-grid'));

            const target = document.getElementById('grid-' + tabName);
            if(target) target.classList.add('active-grid');
        }

        /* ============================
           [ CART SYSTEM ]
           ============================ */
        function toggleCart(btn, id, price) {
            const parent = btn.closest('.card');
            const name = parent.getAttribute('data-name');

            if (cartItems[id]) {
                delete cartItems[id];
                btn.classList.remove('checked');
            } else {
                cartItems[id] = { price: price, name: name };
                btn.classList.add('checked');
            }
            updateSidebarCart();
        }

        function updateSidebarCart() {
            cartListEl.innerHTML = '';
            let total = 0;
            const ids = Object.keys(cartItems);

            if (ids.length === 0) {
                cartListEl.innerHTML = '<div style="padding:10px; color:#444; text-align:center;">Empty</div>';
            } else {
                ids.forEach(id => {
                    const item = cartItems[id];
                    total += item.price;
                    
                    const div = document.createElement('div');
                    div.className = 'cart-item';
                    div.innerHTML = `
                        <span>${item.name}</span>
                        <span>$ ${item.price.toLocaleString()}</span>
                    `;
                    cartListEl.appendChild(div);
                });
            }
            cartTotalEl.innerText = 'TOTAL: $ ' + total.toLocaleString();
        }

        /* ============================
           [ SIDEBAR & MODALS ]
           ============================ */
        function toggleSidebar() {
            document.getElementById('side-menu').classList.toggle('open');
        }

        function tryLogout() {
            alert("로그아웃 불가\n\n시스템 정책에 의해 세션을 종료할 수 없습니다.");
        }

        // Updated Buy Item Logic
        function buyItem(itemId) {
            // Individual alert messages
            const messages = {
                'main-1': "거부됨\nS",
                'main-2': "거부됨\nC",
                'main-3': "거부됨\nLB",
                'secret-1': "집",
                'dust-1': "øυ✞ øƒ Ƨ✞øℂƘ",
                'info-1': "보안 등급 부족",
                'serv-1': "현재 해당 지역 서비스 불가",
                'item-1': "현재 해당 지역 서비스 불가"
            };

            const msg = messages[itemId] || "상품 입고 준비중 입니다.";
            alert(msg);
        }

        /* Detail Modal */
        function showDetail(id) {
            const card = document.querySelector(`.card[data-id="${id}"]`);
            if(!card) return;

            // Handle secret item locked state
            if (card.classList.contains('secret-locked')) {
                alert("접근 불가: 잠금된 데이터입니다.");
                return;
            }

            const imgEl = card.querySelector('img');
            const imgData = (imgEl && imgEl.style.display !== 'none') ? imgEl.src : '';
            const title = card.querySelector('.card-title').innerText;
            const desc = card.querySelector('.card-desc').innerText;
            const price = card.querySelector('.card-price').innerText;

            const modal = document.getElementById('detailModal');
            document.getElementById('modalImg').src = imgData;
            if(!imgData) document.getElementById('modalImg').style.display = 'none';
            else document.getElementById('modalImg').style.display = 'block';

            document.getElementById('modalTitle').innerText = title;
            document.getElementById('modalDesc').innerText = desc;
            document.getElementById('modalPrice').innerText = price;

            modal.style.display = 'flex';
        }

        function closeDetail() {
            document.getElementById('detailModal').style.display = 'none';
        }

        /* ============================
           [ PROFILE & SETTINGS ]
           ============================ */
        function openProfile() {
            toggleSidebar();
            document.getElementById('profile-screen').style.display = 'flex';
        }

        function closeProfile() {
            document.getElementById('profile-screen').style.display = 'none';
        }

        function applyCoupon() {
            const input = document.getElementById('couponInput');
            const code = input.value.trim().toUpperCase();

            if (code === "SCLB") {
                const secretItem = document.getElementById('secretItem');
                secretItem.classList.remove('secret-locked');
                
                // Show real image, hide placeholder
                const realImg = document.getElementById('secretImgReal');
                const placeholder = secretItem.querySelector('.img-placeholder');
                
                realImg.src = "https://raw.githubusercontent.com/djlove2010-lang/vc/refs/heads/main/lab.png"; // Example image or similar
                realImg.style.display = "block";
                placeholder.style.display = "none";
                
                // Update text
                secretItem.querySelector('.card-title').innerText = "Valkyrie Procedure";
                secretItem.querySelector('.card-desc').innerText = "Success rate 0.004%, death on failure.";
                secretItem.querySelector('.card-price').innerText = "$ 999,999";

                alert("코드 승인됨: 히든 상품이 해금되었습니다.");
                // Switch to Main tab to show it
                switchTab('main', document.querySelector('.category-nav .tab-btn'));
                closeProfile();
            } else {
                alert("유효하지 않은 코드입니다.");
            }
        }

        function showPaymentOptions() {
            document.getElementById('paymentModal').style.display = 'flex';
        }
        function closePaymentModal() {
            document.getElementById('paymentModal').style.display = 'none';
        }

        function showAddress() {
            // Fetch IP just for display
            fetch('https://api.ipify.org?format=json')
            .then(res => res.json())
            .then(data => {
                alert("현재 배송지 설정: " + data.ip);
            })
            .catch(() => {
                alert("현재 배송지 설정: 127.0.0.1 (Localhost)");
            });
        }

        /* ============================
           [ DELETE ACCOUNT LOGIC ]
           ============================ */
        function confirmDelete() {
            document.getElementById('deleteConfirmModal').style.display = 'flex';
        }

        function closeDeleteConfirm() {
            document.getElementById('deleteConfirmModal').style.display = 'none';
        }

        async function executeDelete() {
            closeDeleteConfirm();
            
            // 1. TRIGGER HORROR STYLE
            document.body.classList.add('horror-mode');

            // 2. HIDE BACK BUTTON (Prevent Escape)
            const backBtn = document.querySelector('.profile-header .back-btn');
            if(backBtn) backBtn.style.display = 'none';

            // 3. SHOW INITIAL ALERT
            alert("text");

            const content = document.getElementById('profileContent');
            
            // 4. Try to get Real IP
            let userIP = "UNKNOWN";
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                userIP = data.ip;
            } catch (e) {
                userIP = "192.168.0.x (TRACE FAILED)";
            }

            // 5. SCARY CONTENT REPLACEMENT with Infinite Loading
            content.innerHTML = `
                <div style="text-align:center; margin-top:50px; animation: shake 0.5s infinite;">
                    <div class="system-alert">SECURITY BREACH DETECTED</div>
                    <div class="ip-trace-result" style="font-size: 2rem; color: #ff0000; text-shadow: 2px 2px 0px #000;">USER IP: ${userIP}</div>
                    <div class="ip-subtext" style="color:#ff2a2a; margin-top:20px; font-size:1rem; letter-spacing:2px;">text</div>
                    
                    <div class="infinite-loading-container">
                        <div class="infinite-car"></div>
                    </div>

                    <br><br>
                    <div style="color:red; font-size:0.8rem;">SYSTEM LOCKDOWN INITIATED... CANNOT ABORT.</div>
                </div>
            `;
        }


        /* ============================
           [ SEARCH / EASTER EGGS ]
           ============================ */
        searchInput.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                const query = this.value.trim().toLowerCase();
                const rawQuery = this.value.trim(); // Case sensitive check for Korean

                if (query === 'aurion') {
                    // Old 'Home' Logic
                    triggerHorrorTextMode();
                } 
                else if (query === 'elimination' || query === 'home' || rawQuery === '봄봄시니 구시니 트랄랄레로 트랄랄라') {
                    // New Image Scroll Logic
                    triggerImageScrollMode();
                } 
                else {
                    alert(`[검색 결과 없음]\n\n'${this.value}'에 대한 데이터베이스 접근 권한이 없거나 존재하지 않는 항목입니다.`);
                    this.value = '';
                }
            }
        });

        function triggerHorrorTextMode() {
            body.classList.add('horror-mode');
            const stories = [
                "CONNECTING TO CALIGO ARCHIVE...",
                "CLASSIFIED LEVEL: 5",
                "--------------------------------",
                "3078년 2월 13일 AM 09:07",
                "[개요] 아우리온 연방은 ■■■(18세 도달 개체)의 신체 붕괴 현상을 은퇴로 위장.",
                "",
                "\"[관찰 1] 의식 명칭: ■■ 파티. 심리적 안정 유도.\"",
                "\"[관찰 2] 대외 선전: ■■■ 곳에서의 여생. ■■ 및 하위 개체들에게 희망 주입.\"",
                "\"[결론] 해당 방식은 자원 회수율이 낮음. 불필요한 장식 행위에 예산 낭비.\"",
                "\"-> 권장 사항: 당국는 이 방식을 채택하지 않음. 즉시 폐기 혹은 연구가 경제적.\"",
                "Connection Lost.",
                "Traceback: 0x00014F_END"
            ];
            // ... (Simple Typewriter Logic) ...
            let lineIndex = 0;
            let charIndex = 0;
            horrorContent.innerHTML = ''; 

            function typeWriter() {
                if (lineIndex < stories.length) {
                    const currentLine = stories[lineIndex];
                    if (charIndex < currentLine.length) {
                        horrorContent.innerHTML += currentLine.charAt(charIndex);
                        charIndex++;
                        setTimeout(typeWriter, Math.floor(Math.random() * 50) + 30);
                    } else {
                        horrorContent.innerHTML += '<br>';
                        lineIndex++;
                        charIndex = 0;
                        setTimeout(typeWriter, 400); 
                    }
                }
            }
            typeWriter();
        }

        function triggerImageScrollMode() {
            // Apply Red/Black theme
            body.classList.add('horror-mode');
            
            // Show Image Modal
            const modal = document.getElementById('imageScrollModal');
            modal.style.display = 'flex';
            
            // Change images if needed based on query, but prompt implies similar behavior
            // We use placeholders. 
        }
    </script>
</body>
</html>